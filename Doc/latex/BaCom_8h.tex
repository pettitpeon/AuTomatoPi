\hypertarget{BaCom_8h}{}\section{Ba\+Com.\+h File Reference}
\label{BaCom_8h}\index{Ba\+Com.\+h@{Ba\+Com.\+h}}


Communications A\+P\+I.  


{\ttfamily \#include \char`\"{}Ba\+Bool.\+h\char`\"{}}\\*
Include dependency graph for Ba\+Com.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=137pt]{BaCom_8h__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{BaCom_8h_a560d10625971945890a829c2cfd32769}{}\#define \hyperlink{BaCom_8h_a560d10625971945890a829c2cfd32769}{B\+A\+C\+O\+M\+\_\+\+S\+E\+R\+I\+A\+L\+D\+E\+V}~\char`\"{}/dev/tty\+A\+M\+A0\char`\"{}\label{BaCom_8h_a560d10625971945890a829c2cfd32769}

\begin{DoxyCompactList}\small\item\em Serial device path. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\hypertarget{BaCom_8h_a9ac1d442bdbe734ad6aac5974f37e4ad}{}typedef int32\+\_\+t \hyperlink{BaCom_8h_a9ac1d442bdbe734ad6aac5974f37e4ad}{T\+Ba\+Com\+Hdl}\label{BaCom_8h_a9ac1d442bdbe734ad6aac5974f37e4ad}

\begin{DoxyCompactList}\small\item\em Ba\+Com Handle. \end{DoxyCompactList}\item 
\hypertarget{BaCom_8h_abd28efcbb112d949c065c93b9496f281}{}typedef void $\ast$ \hyperlink{BaCom_8h_abd28efcbb112d949c065c93b9496f281}{T\+Ba\+Com\+Ser\+Hdl}\label{BaCom_8h_abd28efcbb112d949c065c93b9496f281}

\begin{DoxyCompactList}\small\item\em Serial interface handle. \end{DoxyCompactList}\item 
\hypertarget{BaCom_8h_add8b012b9350e6336e8bc815a3b732d2}{}typedef void $\ast$($\ast$ \hyperlink{BaCom_8h_add8b012b9350e6336e8bc815a3b732d2}{T\+Ba\+Com1w\+Read\+Fun}) (const char $\ast$str, size\+\_\+t n)\label{BaCom_8h_add8b012b9350e6336e8bc815a3b732d2}

\begin{DoxyCompactList}\small\item\em Callback function to parse the string returned by the driver from /sys/bus/w1/devices/$<$\+Serial\+No$>$/w1\+\_\+slave. \end{DoxyCompactList}\item 
\hypertarget{BaCom_8h_a0c2d065555852132f1e554bba19040db}{}typedef enum \hyperlink{BaCom_8h_a51ae55d0c5491b76a6070eb31390691d}{E\+Ba\+Com\+Baud} \hyperlink{BaCom_8h_a0c2d065555852132f1e554bba19040db}{E\+Ba\+Com\+Baud}\label{BaCom_8h_a0c2d065555852132f1e554bba19040db}

\begin{DoxyCompactList}\small\item\em Baud enumeration. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
\hypertarget{BaCom_8h_a51ae55d0c5491b76a6070eb31390691d}{}enum \hyperlink{BaCom_8h_a51ae55d0c5491b76a6070eb31390691d}{E\+Ba\+Com\+Baud} \label{BaCom_8h_a51ae55d0c5491b76a6070eb31390691d}
\begin{DoxyCompactList}\small\item\em Baud enumeration. \end{DoxyCompactList}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{Indent}{\bf One Wire bus}\par
\begin{DoxyCompactItemize}
\item 
\hyperlink{BaBool_8h_a84d5a0de4729ca4c89f2479c605dbf3d}{T\+Ba\+Bool\+R\+C} \hyperlink{BaCom_8h_a36457e41594d45b408d50a9dd23866e2}{Ba\+Com1\+W\+Init} ()
\begin{DoxyCompactList}\small\item\em Initializes the resources, reserves G\+P\+I\+O 4 and calls \hyperlink{BaCom_8h_a17f4dcfdde9d9a2a0b2c88151b744706}{Ba\+Com1\+W\+Get\+Devices()} \end{DoxyCompactList}\item 
\hyperlink{BaBool_8h_a84d5a0de4729ca4c89f2479c605dbf3d}{T\+Ba\+Bool\+R\+C} \hyperlink{BaCom_8h_a1db343e7949ded79fd54ed5c49dfbdfa}{Ba\+Com1\+W\+Exit} ()
\begin{DoxyCompactList}\small\item\em Releases the resources. \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{BaCom_8h_a17f4dcfdde9d9a2a0b2c88151b744706}{Ba\+Com1\+W\+Get\+Devices} ()
\begin{DoxyCompactList}\small\item\em Scans for devices and saves them internally. \end{DoxyCompactList}\item 
float \hyperlink{BaCom_8h_aead9e89e6d443d5cdfdf0f5f0b7489ec}{Ba\+Com1\+W\+Get\+Temp} (const char $\ast$ser\+No, \hyperlink{BaBool_8h_a5fe1eb8d6ba045ac2251a8f369c2e7b6}{T\+Ba\+Bool} $\ast$p\+Error)
\begin{DoxyCompactList}\small\item\em Get temperature from temperature sensor. \end{DoxyCompactList}\item 
void $\ast$ \hyperlink{BaCom_8h_a5289d4a8cefd0fce2826ed5719b32394}{Ba\+Com1\+W\+Get\+Value} (uint8\+\_\+t fam\+I\+D, const char $\ast$ser\+No, \hyperlink{BaCom_8h_add8b012b9350e6336e8bc815a3b732d2}{T\+Ba\+Com1w\+Read\+Fun} cb, \hyperlink{BaBool_8h_a5fe1eb8d6ba045ac2251a8f369c2e7b6}{T\+Ba\+Bool} $\ast$p\+Error)
\begin{DoxyCompactList}\small\item\em Gets the data from a generic one wire device by calling user callback. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}{\bf Serial Interface}\par
\begin{DoxyCompactItemize}
\item 
\hyperlink{BaCom_8h_abd28efcbb112d949c065c93b9496f281}{T\+Ba\+Com\+Ser\+Hdl} \hyperlink{BaCom_8h_afd029cee32185ec1613ba18b144439a2}{Ba\+Com\+Ser\+Init} (const char $\ast$device, \hyperlink{BaCom_8h_a51ae55d0c5491b76a6070eb31390691d}{E\+Ba\+Com\+Baud} baud)
\begin{DoxyCompactList}\small\item\em Initializes the resources and reserves G\+P\+I\+Os 14 and 15 for. \end{DoxyCompactList}\item 
\hyperlink{BaBool_8h_a84d5a0de4729ca4c89f2479c605dbf3d}{T\+Ba\+Bool\+R\+C} \hyperlink{BaCom_8h_a607a0ab43460b1e999519a8b6697e7f2}{Ba\+Com\+Ser\+Exit} (\hyperlink{BaCom_8h_abd28efcbb112d949c065c93b9496f281}{T\+Ba\+Com\+Ser\+Hdl} hdl)
\begin{DoxyCompactList}\small\item\em Frees resources. \end{DoxyCompactList}\item 
\hyperlink{BaBool_8h_a84d5a0de4729ca4c89f2479c605dbf3d}{T\+Ba\+Bool\+R\+C} \hyperlink{BaCom_8h_a6e2bd92d46d4f9326dbccc3f25408fcd}{Ba\+Com\+Ser\+Put\+C} (\hyperlink{BaCom_8h_abd28efcbb112d949c065c93b9496f281}{T\+Ba\+Com\+Ser\+Hdl} hdl, uint8\+\_\+t c)
\begin{DoxyCompactList}\small\item\em Initializes the resources and reserves G\+P\+I\+Os 14 and 15 for. \end{DoxyCompactList}\item 
int \hyperlink{BaCom_8h_a5763d9526e6dc78f324391e4a17b4d36}{Ba\+Com\+Ser\+Pend} (\hyperlink{BaCom_8h_abd28efcbb112d949c065c93b9496f281}{T\+Ba\+Com\+Ser\+Hdl} hdl)
\begin{DoxyCompactList}\small\item\em Initializes the resources and reserves G\+P\+I\+Os 14 and 15 for. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{BaCom_8h_aced95b335f1d9c05e7b3c84427cd9949}{Ba\+Com\+Ser\+Get\+C} (\hyperlink{BaCom_8h_abd28efcbb112d949c065c93b9496f281}{T\+Ba\+Com\+Ser\+Hdl} hdl)
\begin{DoxyCompactList}\small\item\em Initializes the resources and reserves G\+P\+I\+Os 14 and 15 for. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}


\subsection{Detailed Description}
Communications A\+P\+I. 


\begin{DoxyItemize}
\item I2\+C
\item S\+P\+I
\item Serial
\item One Wire Bus 
\end{DoxyItemize}

\subsection{Function Documentation}
\hypertarget{BaCom_8h_a36457e41594d45b408d50a9dd23866e2}{}\index{Ba\+Com.\+h@{Ba\+Com.\+h}!Ba\+Com1\+W\+Init@{Ba\+Com1\+W\+Init}}
\index{Ba\+Com1\+W\+Init@{Ba\+Com1\+W\+Init}!Ba\+Com.\+h@{Ba\+Com.\+h}}
\subsubsection[{Ba\+Com1\+W\+Init()}]{\setlength{\rightskip}{0pt plus 5cm}{\bf T\+Ba\+Bool\+R\+C} Ba\+Com1\+W\+Init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{BaCom_8h_a36457e41594d45b408d50a9dd23866e2}


Initializes the resources, reserves G\+P\+I\+O 4 and calls \hyperlink{BaCom_8h_a17f4dcfdde9d9a2a0b2c88151b744706}{Ba\+Com1\+W\+Get\+Devices()} 

\begin{DoxyReturn}{Returns}
Error of success 
\end{DoxyReturn}
\hypertarget{BaCom_8h_a1db343e7949ded79fd54ed5c49dfbdfa}{}\index{Ba\+Com.\+h@{Ba\+Com.\+h}!Ba\+Com1\+W\+Exit@{Ba\+Com1\+W\+Exit}}
\index{Ba\+Com1\+W\+Exit@{Ba\+Com1\+W\+Exit}!Ba\+Com.\+h@{Ba\+Com.\+h}}
\subsubsection[{Ba\+Com1\+W\+Exit()}]{\setlength{\rightskip}{0pt plus 5cm}{\bf T\+Ba\+Bool\+R\+C} Ba\+Com1\+W\+Exit (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{BaCom_8h_a1db343e7949ded79fd54ed5c49dfbdfa}


Releases the resources. 

\begin{DoxyReturn}{Returns}
Error of success 
\end{DoxyReturn}
\hypertarget{BaCom_8h_a17f4dcfdde9d9a2a0b2c88151b744706}{}\index{Ba\+Com.\+h@{Ba\+Com.\+h}!Ba\+Com1\+W\+Get\+Devices@{Ba\+Com1\+W\+Get\+Devices}}
\index{Ba\+Com1\+W\+Get\+Devices@{Ba\+Com1\+W\+Get\+Devices}!Ba\+Com.\+h@{Ba\+Com.\+h}}
\subsubsection[{Ba\+Com1\+W\+Get\+Devices()}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t Ba\+Com1\+W\+Get\+Devices (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{BaCom_8h_a17f4dcfdde9d9a2a0b2c88151b744706}


Scans for devices and saves them internally. 

This is automatically called by \hyperlink{BaCom_8h_a36457e41594d45b408d50a9dd23866e2}{Ba\+Com1\+W\+Init()} \begin{DoxyReturn}{Returns}
the number of devices found 
\end{DoxyReturn}
\hypertarget{BaCom_8h_aead9e89e6d443d5cdfdf0f5f0b7489ec}{}\index{Ba\+Com.\+h@{Ba\+Com.\+h}!Ba\+Com1\+W\+Get\+Temp@{Ba\+Com1\+W\+Get\+Temp}}
\index{Ba\+Com1\+W\+Get\+Temp@{Ba\+Com1\+W\+Get\+Temp}!Ba\+Com.\+h@{Ba\+Com.\+h}}
\subsubsection[{Ba\+Com1\+W\+Get\+Temp(const char $\ast$ser\+No, T\+Ba\+Bool $\ast$p\+Error)}]{\setlength{\rightskip}{0pt plus 5cm}float Ba\+Com1\+W\+Get\+Temp (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{ser\+No, }
\item[{{\bf T\+Ba\+Bool} $\ast$}]{p\+Error}
\end{DoxyParamCaption}
)}\label{BaCom_8h_aead9e89e6d443d5cdfdf0f5f0b7489ec}


Get temperature from temperature sensor. 

\begin{DoxyReturn}{Returns}
Temperature in Â°\+C on success, otherwise -\/300 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ser\+No} & Optional serial number of the sensor eg\+: \char`\"{}28-\/0215c2c4bcff\char`\"{}. If null, the first sensor with family I\+D 28 is used \\
\hline
\mbox{\tt out}  & {\em p\+Error} & Optional error flag. Only modified if error \\
\hline
\end{DoxyParams}
\hypertarget{BaCom_8h_a5289d4a8cefd0fce2826ed5719b32394}{}\index{Ba\+Com.\+h@{Ba\+Com.\+h}!Ba\+Com1\+W\+Get\+Value@{Ba\+Com1\+W\+Get\+Value}}
\index{Ba\+Com1\+W\+Get\+Value@{Ba\+Com1\+W\+Get\+Value}!Ba\+Com.\+h@{Ba\+Com.\+h}}
\subsubsection[{Ba\+Com1\+W\+Get\+Value(uint8\+\_\+t fam\+I\+D, const char $\ast$ser\+No, T\+Ba\+Com1w\+Read\+Fun cb, T\+Ba\+Bool $\ast$p\+Error)}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ Ba\+Com1\+W\+Get\+Value (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{fam\+I\+D, }
\item[{const char $\ast$}]{ser\+No, }
\item[{{\bf T\+Ba\+Com1w\+Read\+Fun}}]{cb, }
\item[{{\bf T\+Ba\+Bool} $\ast$}]{p\+Error}
\end{DoxyParamCaption}
)}\label{BaCom_8h_a5289d4a8cefd0fce2826ed5719b32394}


Gets the data from a generic one wire device by calling user callback. 

\begin{DoxyReturn}{Returns}
Null if error, or the data returned by {\ttfamily cb} 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fam\+I\+D} & Family I\+D of the sensor eg\+: temperature = 28 \\
\hline
\mbox{\tt in}  & {\em ser\+No} & Optional serial number of the sensor eg\+: \char`\"{}28-\/0215c2c4bcff\char`\"{}. If null, the first sensor with family I\+D 28 is used \\
\hline
\mbox{\tt in}  & {\em cb} & Callback function that parses the string returned by the driver \\
\hline
\mbox{\tt out}  & {\em p\+Error} & Optional error flag. Only modified if error \\
\hline
\end{DoxyParams}
\hypertarget{BaCom_8h_afd029cee32185ec1613ba18b144439a2}{}\index{Ba\+Com.\+h@{Ba\+Com.\+h}!Ba\+Com\+Ser\+Init@{Ba\+Com\+Ser\+Init}}
\index{Ba\+Com\+Ser\+Init@{Ba\+Com\+Ser\+Init}!Ba\+Com.\+h@{Ba\+Com.\+h}}
\subsubsection[{Ba\+Com\+Ser\+Init(const char $\ast$device, E\+Ba\+Com\+Baud baud)}]{\setlength{\rightskip}{0pt plus 5cm}{\bf T\+Ba\+Com\+Ser\+Hdl} Ba\+Com\+Ser\+Init (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{device, }
\item[{{\bf E\+Ba\+Com\+Baud}}]{baud}
\end{DoxyParamCaption}
)}\label{BaCom_8h_afd029cee32185ec1613ba18b144439a2}


Initializes the resources and reserves G\+P\+I\+Os 14 and 15 for. 

\begin{DoxyReturn}{Returns}
Handle on success, otherwise error 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em device} & Device path, e.\+g. B\+A\+C\+O\+M\+\_\+\+S\+E\+R\+I\+A\+L\+D\+E\+V \\
\hline
{\em baud} & Baud rate \\
\hline
\end{DoxyParams}
\hypertarget{BaCom_8h_a607a0ab43460b1e999519a8b6697e7f2}{}\index{Ba\+Com.\+h@{Ba\+Com.\+h}!Ba\+Com\+Ser\+Exit@{Ba\+Com\+Ser\+Exit}}
\index{Ba\+Com\+Ser\+Exit@{Ba\+Com\+Ser\+Exit}!Ba\+Com.\+h@{Ba\+Com.\+h}}
\subsubsection[{Ba\+Com\+Ser\+Exit(\+T\+Ba\+Com\+Ser\+Hdl hdl)}]{\setlength{\rightskip}{0pt plus 5cm}{\bf T\+Ba\+Bool\+R\+C} Ba\+Com\+Ser\+Exit (
\begin{DoxyParamCaption}
\item[{{\bf T\+Ba\+Com\+Ser\+Hdl}}]{hdl}
\end{DoxyParamCaption}
)}\label{BaCom_8h_a607a0ab43460b1e999519a8b6697e7f2}


Frees resources. 

\begin{DoxyReturn}{Returns}
Error or success 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em hdl} & Serial communication handle \\
\hline
\end{DoxyParams}
\hypertarget{BaCom_8h_a6e2bd92d46d4f9326dbccc3f25408fcd}{}\index{Ba\+Com.\+h@{Ba\+Com.\+h}!Ba\+Com\+Ser\+Put\+C@{Ba\+Com\+Ser\+Put\+C}}
\index{Ba\+Com\+Ser\+Put\+C@{Ba\+Com\+Ser\+Put\+C}!Ba\+Com.\+h@{Ba\+Com.\+h}}
\subsubsection[{Ba\+Com\+Ser\+Put\+C(\+T\+Ba\+Com\+Ser\+Hdl hdl, uint8\+\_\+t c)}]{\setlength{\rightskip}{0pt plus 5cm}{\bf T\+Ba\+Bool\+R\+C} Ba\+Com\+Ser\+Put\+C (
\begin{DoxyParamCaption}
\item[{{\bf T\+Ba\+Com\+Ser\+Hdl}}]{hdl, }
\item[{uint8\+\_\+t}]{c}
\end{DoxyParamCaption}
)}\label{BaCom_8h_a6e2bd92d46d4f9326dbccc3f25408fcd}


Initializes the resources and reserves G\+P\+I\+Os 14 and 15 for. 

\begin{DoxyReturn}{Returns}
Handle on success, otherwise error 
\end{DoxyReturn}
\hypertarget{BaCom_8h_a5763d9526e6dc78f324391e4a17b4d36}{}\index{Ba\+Com.\+h@{Ba\+Com.\+h}!Ba\+Com\+Ser\+Pend@{Ba\+Com\+Ser\+Pend}}
\index{Ba\+Com\+Ser\+Pend@{Ba\+Com\+Ser\+Pend}!Ba\+Com.\+h@{Ba\+Com.\+h}}
\subsubsection[{Ba\+Com\+Ser\+Pend(\+T\+Ba\+Com\+Ser\+Hdl hdl)}]{\setlength{\rightskip}{0pt plus 5cm}int Ba\+Com\+Ser\+Pend (
\begin{DoxyParamCaption}
\item[{{\bf T\+Ba\+Com\+Ser\+Hdl}}]{hdl}
\end{DoxyParamCaption}
)}\label{BaCom_8h_a5763d9526e6dc78f324391e4a17b4d36}


Initializes the resources and reserves G\+P\+I\+Os 14 and 15 for. 

\begin{DoxyReturn}{Returns}
Handle on success, otherwise error 
\end{DoxyReturn}
\hypertarget{BaCom_8h_aced95b335f1d9c05e7b3c84427cd9949}{}\index{Ba\+Com.\+h@{Ba\+Com.\+h}!Ba\+Com\+Ser\+Get\+C@{Ba\+Com\+Ser\+Get\+C}}
\index{Ba\+Com\+Ser\+Get\+C@{Ba\+Com\+Ser\+Get\+C}!Ba\+Com.\+h@{Ba\+Com.\+h}}
\subsubsection[{Ba\+Com\+Ser\+Get\+C(\+T\+Ba\+Com\+Ser\+Hdl hdl)}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t Ba\+Com\+Ser\+Get\+C (
\begin{DoxyParamCaption}
\item[{{\bf T\+Ba\+Com\+Ser\+Hdl}}]{hdl}
\end{DoxyParamCaption}
)}\label{BaCom_8h_aced95b335f1d9c05e7b3c84427cd9949}


Initializes the resources and reserves G\+P\+I\+Os 14 and 15 for. 

\begin{DoxyReturn}{Returns}
Handle on success, otherwise error 
\end{DoxyReturn}
